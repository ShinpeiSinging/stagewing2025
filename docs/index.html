<script>
const API_URL = 'https://script.google.com/macros/s/XXXX/exec';

window.addEventListener('DOMContentLoaded', function () {
  // 公演日時取得
  fetch(API_URL + '?type=events')
    .then(response => response.json())
    .then(events => {
      const select = document.getElementById('datetime-select');
      events.forEach(event => {
        const option = document.createElement('option');
        option.value = event.datetime;
        option.textContent = event.datetime;
        select.appendChild(option);
      });
    });

  // 紹介者取得
  fetch(API_URL + '?type=referrers')
    .then(response => response.json())
    .then(referrers => {
      const select = document.getElementById('referrer-select');
      referrers
        .sort((a, b) => a.kana.localeCompare(b.kana, 'ja'))
        .forEach(r => {
          const option = document.createElement('option');
          option.value = r.id;
          option.textContent = r.name;
          select.appendChild(option);
        });
    });
});
</script>
